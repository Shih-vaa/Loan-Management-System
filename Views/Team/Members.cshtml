@model LoanManagementSystem.Models.Team
@{
    ViewData["Title"] = "Manage Team Members";
    var allUsers = ViewBag.AllUsers as List<LoanManagementSystem.Models.User>;
}

<div class="container mt-4">
    <h2>Manage Members for @Model.TeamName</h2>

    <form method="post" asp-action="AddMember">
        <input type="hidden" name="teamId" value="@Model.TeamId" />
        <div class="mb-3 d-flex">
            <select class="form-select" name="userId" required>
                @foreach (var user in allUsers)
                {
                    <option value="@user.UserId">@user.FullName (@user.Role)</option>
                }
            </select>
            <button type="submit" class="btn btn-success ms-2">Add</button>
        </div>
    </form>

    <table class="table table-bordered">
        <thead><tr><th>User</th><th>Role</th><th>Action</th></tr></thead>
        <tbody>
        @foreach (var member in Model.Members)
        {
            <tr>
                <td>@member.User?.FullName</td>
                <td>@member.User?.Role</td>
                <td>
                    <form method="post" asp-action="RemoveMember">
                        <input type="hidden" name="teamId" value="@Model.TeamId" />
                        <input type="hidden" name="userId" value="@member.UserId" />
                        <button class="btn btn-sm btn-danger">Remove</button>
                    </form>
                </td>
            </tr>
        }
        </tbody>
    </table>
</div>
